"""
euler157.jl
1/8/2017

Solving the diophantine equation 1/x + 1/y= p/10^n

Consider the diophantine equation 1/x +1/x= p/10^n with x, y, p, n positive integers and x ≤ y.
For n=1 this equation has 20 solutions that are listed below:

1/1+1/1=20/101/1+1/2=15/101/1+1/5=12/101/1+1/10=11/101/2+1/2=10/10
1/2+1/5=7/101/2+1/10=6/101/3+1/6=5/101/3+1/15=4/101/4+1/4=5/10
1/4+1/20=3/101/5+1/5=4/101/5+1/10=3/101/6+1/30=2/101/10+1/10=2/10
1/11+1/110=1/101/12+1/60=1/101/14+1/35=1/101/15+1/30=1/101/20+1/20=1/10
How many solutions has this equation for 1 ≤ n ≤ 9
"""

using CBD.++          ## Shorthand for merging vectors and strings.
import Iterators      ## Iterators Module (Main.Iterators or Iterators) overrides Base.Iterators
import Combinatorics
import Primes


"""
Calculate the number of divisors of n. Usage: n_divisors(24) -> 8, i.e., {1,2,3,4,6,8,12,24}
Divisors are the the Cartesian product of the prime factors. For example, 2^3*3^2*5 = 360  would be:
[2^0, 2^1 ,2^2, 2^3] * [3^0, 3^1, 3^2] * [5^0, 5^1] and n_divisors(360) = 4*3*2 = 24
"""
n_divisors(n) = prod(v+big(1) for (k, v) in factor(n))
n_proper_divisors(n) = n_divisors(n) - 1
